<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: game/board.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: game/board.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Contains the game board class: Board.
 * @file
 * @see Board
 */

/**
 * The game board class.
 * @name Board
 * @namespace
 * @classdesc Game board - Manage the UI: buttons, stats...
 */
var Board = {
  
  /**
   * Control flags.
   * @memberof Board
   * @name flags
   * @type {object}
   * @property {bool} render - Debug rendering on/off
   */
  flags : {
    render : 1,
  },

  
  /**
   * Initialize the board.
   * @memberof Board
   * @name init
   * @method
   */
  init : function () {
    // Bind click on boad commands.
    jQuery('.board-command').each(function(){
      jQuery(this).click(function(){
        window["Board"][jQuery(this).attr("data-callback")]();
      });
    });
    
    // Build tools panel.
    Board.set_tools_panel();
  },

  
  /**
   * Update the board.
   * @memberof Board
   * @name update
   * @method
   */
  update : function () {
    // Update info about current mouse selection.
    Board.info_selection();
  },
  
  
  /**
   * Toggle geometry rendering.
   * @memberof Board
   * @name render_toggle
   * @method
   */
  render_toggle : function () {
    Board.flags.render = 1 - Board.flags.render;
    game.debug.reset();
  },
  
  
  /**
   * Update the information view about current selection.
   * @memberof Board
   * @name info_selection
   * @method
   */
  info_selection : function () {
    var coords = Map.coord2tile({x: phaser_object.inputs.mouse.selection.tile.x, y: phaser_object.inputs.mouse.selection.tile.y});
    var html = "";
    html += '&lt;p>Tile hover: ' + (coords.x + 1) + ':' + (coords.y + 1) + '&lt;/p>'
    jQuery('#info-selection').html(html);
  },
  
  
  /**
   * Update the information view about building.
   * @memberof Board
   * @name info_building
   * @method
   * @param {object|false} building - Building object. If false: clear info box.
   */
  info_building : function (building) {
    if (!building) {
      jQuery('#info-building').html("");
      return;
    }
    var html = "";
    var html_production = Board.get_building_production(building.production);
    html += '&lt;div>';
    // Building name.
    html += '&lt;h3>' + building.name + '&lt;/h3>';
    // Image.
    html += '&lt;div>&lt;img class="info-building__image" src="images/game/buildings/building-' + building.type + '.png" />&lt;/div>';
    // Position and size info.
    html +='&lt;div>Position: ' + building.pos_x + ':' + building.pos_y + ', size: ' + building.width + 'x' + building.height + '&lt;/div>';
    // Production info.
    if (html_production != "") {
      html += '&lt;div>Production: ' + html_production + '&lt;/div>';
      html += '&lt;div>Active: ' + building.power_switch + '&lt;/div>';
    }
    html += '&lt;/div>';
    jQuery('#info-building').html(html);
  },
  
  
  /**
   * Get the information view about building production.
   * @memberof Board
   * @name get_building_production
   * @method
   * @param {object} production - production object.
   */
  get_building_production : function (production) {
    if (typeof production.resources === "undefined" || production.resources.length == 0) 
      return "";
    
    var html = "";
    var obj;
    html += '&lt;div>';
    for (var p in production.resources) {
      obj = production.resources[p]
      html += '&lt;img class="info-resource__image" src="images/game/resources/resource-' + obj.resource + '.png" title="Resource ' + obj.resource + '" /> ';
    }
    html += '&lt;/div>';
    return html;
  },
  
  
  /**
   * Set the tools panel.
   * @memberof Board
   * @name set_tools_panel
   * @method
   */
  set_tools_panel : function () {
    for (var tool in Actions.tools) {
      jQuery('#tools').append(
        $('&lt;div>', {
          id: 'tool-' + tool,
          'data-tool': tool,
          class: 'tool tool--' + tool,
          title: tool,
          mousedown: function() {
            Actions.set(jQuery(this).attr('data-tool'));
          }
        })
      );
    }
    // Select first.
    GameApp.data.action.selected = jQuery('#tools div').first().attr('data-tool');
    jQuery('#tools div').first().addClass('tool--selected');
  },
  


};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Building.html">Building</a></li><li><a href="Resource.html">Resource</a></li><li><a href="Road.html">Road</a></li></ul><h3>Namespaces</h3><ul><li><a href="Actions.html">Actions</a></li><li><a href="Board.html">Board</a></li><li><a href="Database.html">Database</a></li><li><a href="GameApp.html">GameApp</a></li><li><a href="Map.html">Map</a></li><li><a href="Production.html">Production</a></li><li><a href="Resources.html">Resources</a></li><li><a href="Roads.html">Roads</a></li></ul><h3>Global</h3><ul><li><a href="global.html#game">game</a></li><li><a href="global.html#phaser_object">phaser_object</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Wed Oct 25 2017 16:18:33 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
